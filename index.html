<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berfis Cafe - Fresh Breakfast & Catering</title>
    
    <!-- Alpine.js Plugins -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Alpine.js Core -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="Berfis.jpeg" type="image/jpeg">
    <link rel="apple-touch-icon" href="Berfis.jpeg">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        [x-cloak] { display: none !important; }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Animations */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-up {
            animation: fadeUp 0.8s ease-out forwards;
            opacity: 0; /* Start hidden */
        }
        
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-500 { animation-delay: 0.5s; }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#fdf8f6',
                            100: '#f2e8e5',
                            500: '#ff6b00', /* Warm orange */
                            600: '#e65100',
                            900: '#1a1a1a',
                        },
                        accent: {
                            500: '#10b981', /* Green for actions */
                            600: '#059669',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-900 antialiased" x-data="shop()">

    <!-- Header -->
    <header class="fixed top-0 w-full bg-white shadow-sm z-40 transition-all duration-300">
        <div class="max-w-[95%] md:max-w-[90%] 2xl:max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 h-16 md:h-20 flex items-center justify-between">
            
            <div class="flex items-center gap-2 md:gap-3">
                <img src="Berfis.jpeg" alt="Berfis Cafe logo" class="w-12 h-12 md:w-14 md:h-14 rounded-full object-cover">
                <h1 class="text-xl md:text-2xl font-bold tracking-tight text-gray-900">Berfis Cafe</h1>
            </div>

            <!-- Desktop Nav (Removed in favor of universal hamburger menu) -->
            
            <div class="flex items-center gap-3">
                <button @click="isCartOpen = true" class="relative p-2 md:p-3 rounded-full hover:bg-gray-100 transition-colors">
                    <i data-lucide="shopping-bag" class="w-6 h-6 md:w-7 md:h-7 text-gray-700"></i>
                    <span x-show="cartCount > 0" x-transition.scale
                          class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-0.5 md:px-2.5 md:py-1 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-brand-500 rounded-full"
                          x-text="cartCount"></span>
                </button>

                <!-- Mobile & Desktop Menu Button -->
                <button @click="isMenuOpen = true" class="p-2 -mr-2 text-gray-700 hover:bg-gray-100 rounded-full">
                    <i data-lucide="menu" class="w-6 h-6 md:w-7 md:h-7"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Menu Sidebar -->
    <div x-show="isMenuOpen" class="relative z-50" role="dialog" aria-modal="true" x-cloak>
        <div x-show="isMenuOpen" 
             x-transition:enter="transition-opacity ease-linear duration-300" 
             x-transition:enter-start="opacity-0" 
             x-transition:enter-end="opacity-100" 
             x-transition:leave="transition-opacity ease-linear duration-300" 
             x-transition:leave-start="opacity-100" 
             x-transition:leave-end="opacity-0" 
             class="fixed inset-0 bg-gray-900/80 backdrop-blur-sm" 
             @click="isMenuOpen = false"></div>

        <div class="fixed inset-0 flex justify-end">
            <div x-show="isMenuOpen" 
                 x-transition:enter="transition ease-in-out duration-300 transform" 
                 x-transition:enter-start="translate-x-full" 
                 x-transition:enter-end="translate-x-0" 
                 x-transition:leave="transition ease-in-out duration-300 transform" 
                 x-transition:leave-start="translate-x-0" 
                 x-transition:leave-end="translate-x-full" 
                 class="relative ml-16 flex w-full max-w-xs flex-1">
                
                <div class="flex w-full flex-col bg-white pb-12 shadow-xl h-full">
                    <div class="flex px-4 pt-5 pb-2 justify-between items-center border-b border-gray-100">
                        <div class="flex items-center gap-2">
                            <img src="Berfis.jpeg" alt="Berfis Cafe logo" class="w-6 h-6 rounded-full object-cover">
                            <span class="text-xl font-bold">Berfis Cafe</span>
                        </div>
                        <button type="button" @click="isMenuOpen = false" class="-mr-2 inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500">
                            <span class="sr-only">Close menu</span>
                            <i data-lucide="x" class="w-6 h-6"></i>
                        </button>
                    </div>
                    
                    <div class="mt-5 px-4 h-full flex flex-col">
                        <nav class="space-y-2">
                            <a href="#" @click="isMenuOpen = false; window.scrollTo({top: 0, behavior: 'smooth'})" 
                               class="flex items-center gap-3 rounded-md px-3 py-3 text-base font-medium text-gray-900 hover:bg-gray-50">
                                <i data-lucide="home" class="w-5 h-5 text-gray-500"></i>
                                Home
                            </a>
                            
                            <a href="about.html" class="flex items-center gap-3 rounded-md px-3 py-3 text-base font-medium text-gray-900 hover:bg-gray-50">
                                <i data-lucide="info" class="w-5 h-5 text-gray-500"></i>
                                About Us
                            </a>
                            
                            <div class="pt-4 pb-2">
                                <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Menu Categories</p>
                            </div>
                            
                            <template x-for="cat in categories" :key="cat">
                                <button @click="activeCategory = cat; isMenuOpen = false; document.getElementById('menu-grid').scrollIntoView({behavior: 'smooth'})"
                                        :class="activeCategory === cat ? 'bg-brand-50 text-brand-600' : 'text-gray-900 hover:bg-gray-50'"
                                        class="w-full flex items-center gap-3 rounded-md px-3 py-3 text-base font-medium transition-colors">
                                    <i data-lucide="chef-hat" class="w-5 h-5" :class="activeCategory === cat ? 'text-brand-500' : 'text-gray-400'"></i>
                                    <span x-text="cat"></span>
                                </button>
                            </template>

                            <div class="pt-4 pb-2 border-t border-gray-100 mt-4">
                                <a href="contact.html" class="flex items-center gap-3 rounded-md px-3 py-3 text-base font-medium text-gray-900 hover:bg-gray-50">
                                    <i data-lucide="phone" class="w-5 h-5 text-gray-500"></i>
                                    Contact & Support
                                </a>
                            </div>
                        </nav>
                        
                        <div class="mt-auto pb-6">
                            <div class="rounded-xl bg-orange-50 p-4">
                                <div class="flex items-start">
                                    <div class="flex-shrink-0">
                                        <i data-lucide="info" class="h-5 w-5 text-brand-500"></i>
                                    </div>
                                    <div class="ml-3">
                                        <h3 class="text-sm font-medium text-brand-800">Pre-Orders Only</h3>
                                        <div class="mt-1 text-sm text-brand-700">
                                            <p>Remember to order 24-48 hours in advance!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="relative pt-16 md:pt-20 min-h-[450px] md:min-h-[600px] flex flex-col">
        <div class="absolute inset-0 z-0">
            <img class="w-full h-full object-cover" 
                 src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                 alt="Delicious food spread">
            <div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
        </div>
        <div class="relative z-10 max-w-[95%] md:max-w-[90%] 2xl:max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 flex-1 flex flex-col justify-center py-20">
            <span class="inline-block px-3 py-1 md:px-4 md:py-1.5 bg-brand-500 text-white text-xs md:text-sm font-semibold rounded-full w-fit mb-4 md:mb-6 uppercase tracking-wider shadow-sm animate-fade-up">
                Pre-Orders Only
            </span>
            <h2 class="text-4xl md:text-7xl font-bold text-white mb-4 md:mb-6 leading-tight drop-shadow-md animate-fade-up delay-200">
                Fresh Breakfasts,<br>Baskets & Catering
            </h2>
            <p class="text-gray-50 text-lg md:text-2xl max-w-3xl font-medium leading-relaxed drop-shadow-sm animate-fade-up delay-300">
                Delivered in Accra & surroundings. Please order 24–48 hours in advance.
            </p>
            <div class="flex items-center gap-3 mt-6 md:mt-8 text-white text-sm md:text-base font-medium animate-fade-up delay-500">
                <div class="bg-white/20 backdrop-blur-md p-2 rounded-full">
                    <i data-lucide="clock" class="w-5 h-5 md:w-6 md:h-6"></i>
                </div>
                <span class="drop-shadow-sm">Order ahead for perfect freshness</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-[95%] md:max-w-[90%] 2xl:max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10 min-h-screen">
        
        <!-- Menu Grid -->
        <div id="menu-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-10">
            <template x-for="item in filteredItems" :key="item.id">
                <div x-data="{ shown: false }" x-intersect.once="shown = true" 
                     :class="shown ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'"
                     class="bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-700 ease-out flex flex-col group overflow-hidden border border-gray-100 transform">
                    <div class="relative h-64 md:h-72 overflow-hidden">
                        <img :src="item.image" :alt="item.name" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                    </div>
                    
                    <div class="p-6 md:p-8 flex-1 flex flex-col">
                        <div class="flex justify-between items-start mb-3 gap-4">
                            <h3 class="text-xl md:text-2xl font-bold text-gray-900 leading-tight" x-text="item.name"></h3>
                            <div class="flex-shrink-0 bg-gray-50 text-gray-900 font-bold px-3 py-1 rounded-lg text-lg">
                                GHS <span x-text="item.price"></span>
                            </div>
                        </div>
                        
                        <p class="text-gray-500 text-base leading-relaxed mb-6 line-clamp-2" x-text="item.description"></p>
                        
                        <div class="mt-auto flex items-center justify-between gap-4 pt-4 border-t border-gray-50">
                            <div class="flex items-center gap-2 text-sm font-medium text-gray-400 bg-gray-50 px-3 py-1.5 rounded-full">
                                <i data-lucide="users" class="w-4 h-4"></i>
                                <span x-text="item.serves"></span>
                            </div>
                            
                            <button @click="addToCart(item)" 
                                class="flex-1 bg-gray-900 hover:bg-brand-500 text-white px-6 py-3 rounded-xl font-bold transition-all transform active:scale-95 flex items-center justify-center gap-2 shadow-sm">
                                <i data-lucide="plus" class="w-5 h-5"></i>
                                <span>Add</span>
                            </button>
                        </div>
                    </div>
                </div>
            </template>
        </div>

        <div x-show="filteredItems.length === 0" class="text-center py-20 text-gray-500" x-cloak>
            <p>No items found in this category.</p>
        </div>

        <!-- Info Banner -->
        <div class="mt-16 bg-orange-50 rounded-2xl p-6 md:p-8 flex flex-col md:flex-row items-center gap-6 border border-orange-100">
            <div class="bg-white p-3 rounded-full shadow-sm text-brand-500">
                <i data-lucide="alert-circle" class="w-8 h-8"></i>
            </div>
            <div class="text-center md:text-left">
                <h4 class="text-lg font-bold text-gray-900 mb-1">Important Pre-Order Info</h4>
                <p class="text-gray-600">All orders require 24–48 hours notice. We prepare everything fresh specifically for you. Delivery fees are calculated based on your location in Accra.</p>
            </div>
        </div>

    </main>

    <!-- Cart Sidebar -->
    <div x-show="isCartOpen" class="relative z-50" aria-labelledby="slide-over-title" role="dialog" aria-modal="true" x-cloak>
        <!-- Backdrop -->
        <div x-show="isCartOpen" 
             x-transition:enter="ease-in-out duration-500" 
             x-transition:enter-start="opacity-0" 
             x-transition:enter-end="opacity-100" 
             x-transition:leave="ease-in-out duration-500" 
             x-transition:leave-start="opacity-100" 
             x-transition:leave-end="opacity-0" 
             class="fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity" 
             @click="isCartOpen = false"></div>

        <div class="fixed inset-0 overflow-hidden">
            <div class="absolute inset-0 overflow-hidden">
                <div class="pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10">
                    
                    <div x-show="isCartOpen" 
                         x-transition:enter="transform transition ease-in-out duration-500 sm:duration-700" 
                         x-transition:enter-start="translate-x-full" 
                         x-transition:enter-end="translate-x-0" 
                         x-transition:leave="transform transition ease-in-out duration-500 sm:duration-700" 
                         x-transition:leave-start="translate-x-0" 
                         x-transition:leave-end="translate-x-full" 
                         class="pointer-events-auto w-screen max-w-md">
                        
                        <div class="flex h-full flex-col overflow-y-scroll bg-white shadow-xl">
                            <div class="flex-1 overflow-y-auto px-4 py-6 sm:px-6">
                                <div class="flex items-start justify-between">
                                    <h2 class="text-lg font-bold text-gray-900" id="slide-over-title">Your Order</h2>
                                    <div class="ml-3 flex h-7 items-center">
                                        <button type="button" @click="isCartOpen = false" class="-m-2 p-2 text-gray-400 hover:text-gray-500">
                                            <span class="sr-only">Close panel</span>
                                            <i data-lucide="x" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="mt-8">
                                    <div class="flow-root">
                                        <ul role="list" class="-my-6 divide-y divide-gray-200">
                                            
                                            <template x-for="item in cart" :key="item.id">
                                                <li class="flex py-6">
                                                    <div class="h-20 w-20 flex-shrink-0 overflow-hidden rounded-md border border-gray-200">
                                                        <img :src="item.image" :alt="item.name" class="h-full w-full object-cover object-center">
                                                    </div>

                                                    <div class="ml-4 flex flex-1 flex-col">
                                                        <div>
                                                            <div class="flex justify-between text-base font-medium text-gray-900">
                                                                <h3 x-text="item.name"></h3>
                                                                <p class="ml-4 whitespace-nowrap">GHS <span x-text="item.price * item.quantity"></span></p>
                                                            </div>
                                                            <p class="mt-1 text-sm text-gray-500" x-text="item.category"></p>
                                                        </div>
                                                        <div class="flex flex-1 items-end justify-between text-sm">
                                                            
                                                            <div class="flex items-center border border-gray-300 rounded-md">
                                                                <button @click="updateQuantity(item.id, -1)" class="px-2 py-1 text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors">-</button>
                                                                <span class="px-2 font-medium text-gray-900" x-text="item.quantity"></span>
                                                                <button @click="updateQuantity(item.id, 1)" class="px-2 py-1 text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors">+</button>
                                                            </div>

                                                            <button @click="removeFromCart(item.id)" type="button" class="font-medium text-red-500 hover:text-red-600 flex items-center gap-1">
                                                                <i data-lucide="trash-2" class="w-4 h-4"></i> Remove
                                                            </button>
                                                        </div>
                                                    </div>
                                                </li>
                                            </template>
                                            
                                            <li x-show="cart.length === 0" class="py-12 text-center text-gray-500">
                                                <i data-lucide="shopping-basket" class="w-12 h-12 mx-auto mb-3 text-gray-300"></i>
                                                <p>Your cart is empty.</p>
                                                <button @click="isCartOpen = false" class="mt-4 text-brand-500 font-medium hover:underline">Start Ordering</button>
                                            </li>

                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="border-t border-gray-200 px-4 py-6 sm:px-6 bg-gray-50">
                                <div class="flex justify-between text-base font-medium text-gray-900 mb-4">
                                    <p>Subtotal</p>
                                    <p>GHS <span x-text="cartTotal"></span></p>
                                </div>
                                <p class="mt-0.5 text-sm text-gray-500 mb-6">Delivery fees are calculated at checkout confirmation.</p>
                                <div class="mt-6">
                                    <button @click="openCheckout" 
                                            :disabled="cart.length === 0"
                                            :class="cart.length === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-brand-600'"
                                            class="w-full flex items-center justify-center rounded-md border border-transparent bg-brand-500 px-6 py-3 text-base font-medium text-white shadow-sm transition-colors">
                                        Proceed to Pre-Order
                                    </button>
                                </div>
                                <div class="mt-6 flex justify-center text-center text-sm text-gray-500">
                                    <p>
                                        or
                                        <button type="button" class="font-medium text-brand-500 hover:text-brand-600" @click="isCartOpen = false">
                                            Continue Shopping
                                            <span aria-hidden="true"> &rarr;</span>
                                        </button>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div x-show="isCheckoutOpen" class="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true" x-cloak>
        <div class="fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity" 
             x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
             x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"></div>

        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"
                     x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                     x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95">
                    
                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold leading-6 text-gray-900" id="modal-title">Complete Your Pre-Order</h3>
                                    <button @click="isCheckoutOpen = false" class="text-gray-400 hover:text-gray-500">
                                        <i data-lucide="x" class="w-6 h-6"></i>
                                    </button>
                                </div>
                                
                                <form @submit.prevent="submitOrder" class="space-y-4">

                                    <div class="bg-orange-50 rounded-xl p-3 flex items-start gap-3 border border-orange-100 mb-2">
                                        <div class="bg-white p-2 rounded-full shadow-sm text-brand-500">
                                            <i data-lucide="alert-circle" class="w-5 h-5"></i>
                                        </div>
                                        <div class="text-left text-sm text-gray-700">
                                            <p class="font-semibold">Important Pre-Order Info</p>
                                            <p>All orders require 24–48 hours notice. Delivery fees depend on your location in Accra.</p>
                                        </div>
                                    </div>

                                    <div class="bg-gray-50 p-3 rounded-lg mb-4 text-sm text-gray-600 border border-gray-100">
                                        <p class="font-semibold mb-1">Order Summary:</p>
                                        <ul class="list-disc pl-4 space-y-1">
                                            <template x-for="item in cart" :key="item.id">
                                                <li>
                                                    <span x-text="item.name"></span> x <span x-text="item.quantity"></span> 
                                                    (GHS <span x-text="item.price * item.quantity"></span>)
                                                </li>
                                            </template>
                                        </ul>
                                        <p class="mt-2 font-bold text-gray-900 pt-2 border-t border-gray-200">Total: GHS <span x-text="cartTotal"></span></p>
                                    </div>

                                    <div>
                                        <label for="name" class="block text-sm font-medium text-gray-700">Full Name *</label>
                                        <input type="text" name="Name" id="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm border p-2">
                                    </div>

                                    <div>
                                        <label for="whatsapp" class="block text-sm font-medium text-gray-700">WhatsApp Number *</label>
                                        <input type="tel" name="WhatsApp" id="whatsapp" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm border p-2">
                                    </div>

                                    <div>
                                        <label for="date" class="block text-sm font-medium text-gray-700">Date Needed *</label>
                                        <input type="date" name="Date Needed" id="date" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm border p-2">
                                    </div>



                                    <div>
                                        <label for="address" class="block text-sm font-medium text-gray-700">Delivery Location *</label>
                                        <div class="mt-1 space-y-3">
                                            <button type="button"
                                                    @click="useCurrentLocation"
                                                    class="w-full inline-flex justify-center items-center rounded-md border border-transparent bg-brand-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2">
                                                <i data-lucide="map-pin" class="w-4 h-4 mr-2"></i>
                                                <span>Deliver to my current location</span>
                                            </button>
                                            <p class="text-xs text-gray-500" x-text="currentLocationStatus || 'We use your phone location to share a directions link with the rider.'"></p>
                                            <div class="flex items-center gap-2">
                                                <input id="call-for-directions" type="checkbox" x-model="callForDirections" class="h-4 w-4 text-brand-600 border-gray-300 rounded">
                                                <label for="call-for-directions" class="text-xs text-gray-600">Let the dispatch rider call me for directions instead</label>
                                            </div>
                                            <input type="hidden" name="Address" id="address">
                                        </div>
                                    </div>

                                    <div>
                                        <label for="notes" class="block text-sm font-medium text-gray-700">Special Requests / Allergies</label>
                                        <textarea name="Special Requests" id="notes" rows="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 sm:text-sm border p-2"></textarea>
                                    </div>

                                    <div class="mt-5 sm:mt-6">
                                        <button type="submit" 
                                                class="inline-flex w-full justify-center rounded-md border border-transparent bg-brand-500 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 sm:text-sm">
                                            Send Pre-Order Request
                                        </button>
                                        <p class="text-xs text-center text-gray-500 mt-2">We will confirm your order and delivery fee via WhatsApp shortly.</p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/233502518401" target="_blank" class="fixed bottom-6 right-6 z-40 bg-green-500 text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition-transform hover:scale-110 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle"><path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"/></svg>
    </a>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-12">
        <div class="max-w-[90%] 2xl:max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <div class="flex items-center gap-2">
                    <img src="Berfis.jpeg" alt="Berfis Cafe logo" class="w-6 h-6 rounded-full object-cover">
                    <span class="text-xl font-bold">Berfis Cafe</span>
                </div>
                <div class="text-gray-400 text-sm text-center md:text-right">
                    <p>&copy; 2026 Berfis Cafe. All rights reserved.</p>
                    <p class="mt-1">Accra, Ghana • Pre-orders & Delivery Only</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function shop() {
            return {
                isCartOpen: false,
                isMenuOpen: false,
                isCheckoutOpen: false,
                map: null,
                mapMarker: null,
                currentLocationStatus: '',
                callForDirections: false,
                activeCategory: 'Breakfast',
                categories: ['Breakfast', 'Baskets', 'Catering'],
                cart: JSON.parse(localStorage.getItem('cart')) || [],
                
                // Placeholder Data
                menu: [
                    {
                        id: 1,
                        name: 'The Full Ghanaian',
                        description: 'Spicy Waakye, gari, spaghetti, boiled egg, wele, fried fish, and shito. A heavy morning starter.',
                        price: 65,
                        category: 'Breakfast',
                        image: 'https://images.unsplash.com/photo-1604328698692-f76ea9498e76?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80', // Replace with waakye if possible or generic
                        serves: '1 Person'
                    },
                    {
                        id: 2,
                        name: 'English Breakfast Platter',
                        description: 'Two eggs (fried/scrambled), sausages, bacon, baked beans, grilled tomatoes, mushrooms, and toast.',
                        price: 85,
                        category: 'Breakfast',
                        image: 'https://images.unsplash.com/photo-1533089862017-5614a9579cf4?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '1 Person'
                    },
                    {
                        id: 3,
                        name: 'Pancake Stack & Berries',
                        description: 'Fluffy buttermilk pancakes topped with fresh strawberries, blueberries, and maple syrup.',
                        price: 55,
                        category: 'Breakfast',
                        image: 'https://images.unsplash.com/photo-1528207776546-365bb710ee93?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '1 Person'
                    },
                    {
                        id: 4,
                        name: 'Continental Breakfast Box',
                        description: 'Assorted pastries (croissants, danish), fresh fruit salad, yogurt, granola, and juice.',
                        price: 70,
                        category: 'Breakfast',
                        image: 'https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '1 Person'
                    },
                    {
                        id: 5,
                        name: 'Sunshine Fruit Basket',
                        description: 'A beautiful arrangement of seasonal tropical fruits including pineapple, watermelon, pawpaw, and grapes.',
                        price: 250,
                        category: 'Baskets',
                        image: 'https://images.unsplash.com/photo-1610832958506-aa56368176cf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: 'Gift / Family'
                    },
                    {
                        id: 6,
                        name: 'Luxury Brunch Basket',
                        description: 'Includes champagne/sparkling juice, gourmet chocolates, croissants, cheeses, and cold cuts.',
                        price: 450,
                        category: 'Baskets',
                        image: 'https://images.unsplash.com/photo-1549488344-cbb6c34cf08b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '2 People'
                    },
                    {
                        id: 7,
                        name: 'Get Well Soon Basket',
                        description: 'Healthy snacks, herbal teas, honey, fresh lemons, ginger, and immune-boosting fruits.',
                        price: 200,
                        category: 'Baskets',
                        image: 'https://images.unsplash.com/photo-1516594798947-e65505dbb29d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: 'Gift'
                    },
                    {
                        id: 8,
                        name: 'Jollof Rice Party Tray',
                        description: 'Authentic Ghanaian Jollof rice served with grilled chicken pieces, fried plantain, and coleslaw.',
                        price: 350,
                        category: 'Catering',
                        image: 'https://images.unsplash.com/photo-1623961990059-28356e22bc8e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '5-8 People'
                    },
                    {
                        id: 9,
                        name: 'Assorted Finger Foods',
                        description: 'Mini sausage rolls, spring rolls, samosas, chicken wings, and gizzards.',
                        price: 300,
                        category: 'Catering',
                        image: 'https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '10 People'
                    },
                    {
                        id: 10,
                        name: 'Banku & Tilapia Platter',
                        description: 'Soft banku balls served with large grilled tilapia, hot pepper sauce, and sliced onions/tomatoes.',
                        price: 400,
                        category: 'Catering',
                        image: 'https://images.unsplash.com/photo-1594040226829-7f251ab46d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                        serves: '4 People'
                    }
                ],

                get filteredItems() {
                    return this.menu.filter(item => item.category === this.activeCategory);
                },

                get cartCount() {
                    return this.cart.reduce((total, item) => total + item.quantity, 0);
                },

                get cartTotal() {
                    return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
                },
                
                get orderSummaryString() {
                    return this.cart.map(item => `${item.name} (x${item.quantity})`).join(', ');
                },

                useCurrentLocation() {
                    if (!navigator.geolocation) {
                        this.currentLocationStatus = 'Location not supported on this device. You can let the rider call you for directions.';
                        return;
                    }
                    this.currentLocationStatus = 'Getting your location...';
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const lat = position.coords.latitude;
                            const lng = position.coords.longitude;
                            const coords = lat.toFixed(5) + ',' + lng.toFixed(5);
                            const input = document.getElementById('address');
                            if (input) {
                                input.value = coords;
                            }
                            this.currentLocationStatus = 'Location captured. Rider will receive a directions link.';
                        },
                        () => {
                            this.currentLocationStatus = 'Could not get your location. Please allow location access or let the rider call you for directions.';
                        }
                    );
                },

                submitOrder(event) {
                    const form = event.target;
                    const name = form.Name.value;
                    const whatsapp = form.WhatsApp.value;
                    const dateNeeded = form["Date Needed"].value;
                    const address = form.Address.value;
                    const special = form["Special Requests"].value;

                    let addressText = '';
                    if (address) {
                        const isCoord = address.includes(',');
                        const mapsLink = isCoord ? `https://www.google.com/maps?q=${address}` : '';
                        addressText = mapsLink || address;
                    }
                    if (this.callForDirections) {
                        addressText = addressText
                            ? `${addressText} (Rider should call customer for directions)`
                            : 'Rider should call customer for directions';
                    }

                    const messageLines = [
                        "New order from Berfis Cafe website",
                        "",
                        `Name: ${name}`,
                        `Customer WhatsApp: ${whatsapp}`,
                        `Date Needed: ${dateNeeded}`,
                        addressText ? `Address: ${addressText}` : null,
                        special ? `Special Requests: ${special}` : null,
                        "",
                        `Items: ${this.orderSummaryString}`,
                        `Total: GHS ${this.cartTotal}`
                    ].filter(Boolean);

                    const message = messageLines.join("\n");
                    const phone = "233502518401";
                    const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;

                    window.open(url, "_blank");
                    this.cart = [];
                    this.isCheckoutOpen = false;
                },

                addToCart(item) {
                    const existingItem = this.cart.find(i => i.id === item.id);
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        this.cart.push({ ...item, quantity: 1 });
                    }
                    // this.isCartOpen = true; // Removed per user request to keep cart closed on add
                },

                updateQuantity(id, change) {
                    const item = this.cart.find(i => i.id === id);
                    if (item) {
                        item.quantity += change;
                        if (item.quantity <= 0) {
                            this.removeFromCart(id);
                        }
                    }
                },

                removeFromCart(id) {
                    this.cart = this.cart.filter(item => item.id !== id);
                },
                
                openCheckout() {
                    this.isCartOpen = false;
                    this.isCheckoutOpen = true;
                },

                init() {
                    this.$watch('cart', (val) => {
                        localStorage.setItem('cart', JSON.stringify(val));
                    });

                    this.$watch('activeCategory', () => {
                        this.$nextTick(() => lucide.createIcons());
                    });
                    this.$watch('cart', () => {
                        this.$nextTick(() => lucide.createIcons());
                    });
                    this.$watch('isCheckoutOpen', (val) => {
                        if (val) {
                            this.$nextTick(() => {
                                var mapElement = document.getElementById('address-map');
                                if (!mapElement) return;
                                if (!this.map) {
                                    this.map = L.map(mapElement).setView([5.6037, -0.1870], 12);
                                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                        attribution: '&copy; OpenStreetMap contributors'
                                    }).addTo(this.map);
                                    var self = this;
                                    if (navigator.geolocation) {
                                        navigator.geolocation.getCurrentPosition(function (position) {
                                            var lat = position.coords.latitude;
                                            var lng = position.coords.longitude;
                                            self.map.setView([lat, lng], 16);
                                            var clickLatLng = L.latLng(lat, lng);
                                            if (self.mapMarker) {
                                                self.mapMarker.setLatLng(clickLatLng);
                                            } else {
                                                self.mapMarker = L.marker(clickLatLng).addTo(self.map);
                                            }
                                            var input = document.getElementById('address');
                                            if (input) {
                                                input.value = lat.toFixed(5) + ',' + lng.toFixed(5);
                                            }
                                        });
                                    }
                                    this.map.on('click', (e) => {
                                        var lat = e.latlng.lat;
                                        var lng = e.latlng.lng;
                                        if (this.mapMarker) {
                                            this.mapMarker.setLatLng(e.latlng);
                                        } else {
                                            this.mapMarker = L.marker(e.latlng).addTo(this.map);
                                        }
                                        var input = document.getElementById('address');
                                        if (input) {
                                            input.value = lat.toFixed(5) + ',' + lng.toFixed(5);
                                        }
                                    });
                                }
                                setTimeout(() => {
                                    this.map.invalidateSize();
                                }, 200);
                            });
                        }
                    });
                    this.$nextTick(() => lucide.createIcons());
                }
            }
        }
    </script>
</body>
</html>
